"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/onboarding";
exports.ids = ["pages/api/onboarding"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "dotenv/config":
/*!********************************!*\
  !*** external "dotenv/config" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("dotenv/config");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fonboarding&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Conboarding%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fonboarding&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Conboarding%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\onboarding\\index.ts */ \"(api)/./pages/api/onboarding/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/onboarding\",\n        pathname: \"/api/onboarding\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_onboarding_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm9uYm9hcmRpbmcmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q29uYm9hcmRpbmclNUNpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUMrRDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMkRBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDJEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL25paGEtYXBpLWxhdGVzdC8/ZDBlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXG9uYm9hcmRpbmdcXFxcaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vbmJvYXJkaW5nXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb25ib2FyZGluZ1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fonboarding&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Conboarding%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/services/blockradar.ts":
/*!************************************!*\
  !*** ./lib/services/blockradar.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDedicatedAddress: () => (/* binding */ createDedicatedAddress),\n/* harmony export */   getAddressBalance: () => (/* binding */ getAddressBalance),\n/* harmony export */   sendCrypto: () => (/* binding */ sendCrypto)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst apiKey = process.env.BLOCKRADAR_API_KEY;\nconst masterWalletId = process.env.BLOCKRADAR_MASTER_WALLET_ID;\nconst baseURL = process.env.BLOCKRADAR_BASE_URL || \"https://api.blockradar.co/v1\";\nconst network = process.env.BLOCKRADAR_NETWORK || \"testnet\";\nif (!apiKey) {\n    console.warn(\"BLOCKRADAR_API_KEY missing\");\n}\nif (!masterWalletId) {\n    console.warn(\"BLOCKRADAR_MASTER_WALLET_ID missing - you must create a master wallet via BlockRadar dashboard first\");\n}\nconst client = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL,\n    headers: {\n        \"x-api-key\": apiKey,\n        \"Content-Type\": \"application/json\"\n    }\n});\nasync function createDedicatedAddress(userName, userMetadata) {\n    if (!masterWalletId) {\n        throw new Error(\"BLOCKRADAR_MASTER_WALLET_ID not configured. Create a master wallet via BlockRadar dashboard first.\");\n    }\n    const payload = {\n        name: userName,\n        metadata: userMetadata || {},\n        disableAutoSweep: false,\n        enableGaslessWithdraw: true\n    };\n    try {\n        const { data } = await client.post(`/wallets/${masterWalletId}/addresses`, payload);\n        if (!data || !data.data || !data.data.address) {\n            throw new Error(\"Failed to create dedicated address - invalid response\");\n        }\n        return {\n            address: data.data.address,\n            addressId: data.data.id,\n            blockchain: data.data.blockchain?.name || \"ethereum\",\n            network: data.data.network || network,\n            derivationPath: data.data.derivationPath\n        };\n    } catch (error) {\n        console.error(\"BlockRadar createDedicatedAddress error:\", error.response?.data || error.message);\n        console.error(\"Full error:\", error);\n        throw new Error(`Failed to create BlockRadar address: ${error.response?.data?.message || error.message}`);\n    }\n}\nasync function sendCrypto(params) {\n    const payload = {\n        address: params.toAddress,\n        amount: params.amount,\n        blockchain: params.blockchain || \"base\",\n        reference: params.reference || `tx-${Date.now()}`,\n        metadata: params.metadata || {}\n    };\n    try {\n        const { data } = await client.post(\"/gateway/withdraw\", payload);\n        if (!data || !data.data) {\n            throw new Error(\"Failed to send crypto - invalid response\");\n        }\n        return {\n            txHash: data.data.hash || null,\n            txId: data.data.id,\n            status: data.data.status,\n            amount: data.data.amount,\n            recipientAddress: data.data.recipientAddress,\n            reference: data.data.reference\n        };\n    } catch (error) {\n        console.error(\"BlockRadar sendCrypto error:\", error.response?.data || error.message);\n        throw new Error(`Failed to send crypto: ${error.response?.data?.message || error.message}`);\n    }\n}\nasync function getAddressBalance(addressId) {\n    try {\n        const { data } = await client.get(`/addresses/${addressId}/balance`);\n        return data.data;\n    } catch (error) {\n        console.error(\"BlockRadar getAddressBalance error:\", error.response?.data || error.message);\n        return null;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBa0JyQixLQUFLQSxJQUFJLENBQUNxQixnQkFBZ0I7WUFDNUNQLFdBQVdkLEtBQUtBLElBQUksQ0FBQ2MsU0FBUztRQUNoQztJQUNGLEVBQUUsT0FBT1AsT0FBWTtRQUNuQnJCLFFBQVFxQixLQUFLLENBQUMsZ0NBQWdDQSxNQUFNQyxRQUFRLEVBQUVSLFFBQVFPLE1BQU1FLE9BQU87UUFDbkYsTUFBTSxJQUFJZixNQUFNLENBQUMsdUJBQXVCLEVBQUVhLE1BQU1DLFFBQVEsRUFBRVIsTUFBTVMsV0FBV0YsTUFBTUUsT0FBTyxDQUFDLENBQUM7SUFDNUY7QUFDRjtBQUVPLGVBQWVhLGtCQUFrQm5CLFNBQWlCO0lBQ3ZELElBQUk7UUFDRixNQUFNLEVBQUVILElBQUksRUFBRSxHQUFHLE1BQU1aLE9BQU9tQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVwQixVQUFVLFFBQVEsQ0FBQztRQUNuRSxPQUFPSCxLQUFLQSxJQUFJO0lBQ2xCLEVBQUUsT0FBT08sT0FBWTtRQUNuQnJCLFFBQVFxQixLQUFLLENBQUMsdUNBQXVDQSxNQUFNQyxRQUFRLEVBQUVSLFFBQVFPLE1BQU1FLE9BQU87UUFDMUYsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaWhhLWFwaS1sYXRlc3QvLi9saWIvc2VydmljZXMvYmxvY2tyYWRhci50cz9mZjdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XHJcblxyXG5jb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5CTE9DS1JBREFSX0FQSV9LRVk7XHJcbmNvbnN0IG1hc3RlcldhbGxldElkID0gcHJvY2Vzcy5lbnYuQkxPQ0tSQURBUl9NQVNURVJfV0FMTEVUX0lEO1xyXG5jb25zdCBiYXNlVVJMID0gcHJvY2Vzcy5lbnYuQkxPQ0tSQURBUl9CQVNFX1VSTCB8fCAnaHR0cHM6Ly9hcGkuYmxvY2tyYWRhci5jby92MSc7XHJcbmNvbnN0IG5ldHdvcmsgPSBwcm9jZXNzLmVudi5CTE9DS1JBREFSX05FVFdPUksgfHwgJ3Rlc3RuZXQnO1xyXG5cclxuaWYgKCFhcGlLZXkpIHtcclxuICBjb25zb2xlLndhcm4oJ0JMT0NLUkFEQVJfQVBJX0tFWSBtaXNzaW5nJyk7XHJcbn1cclxuaWYgKCFtYXN0ZXJXYWxsZXRJZCkge1xyXG4gIGNvbnNvbGUud2FybignQkxPQ0tSQURBUl9NQVNURVJfV0FMTEVUX0lEIG1pc3NpbmcgLSB5b3UgbXVzdCBjcmVhdGUgYSBtYXN0ZXIgd2FsbGV0IHZpYSBCbG9ja1JhZGFyIGRhc2hib2FyZCBmaXJzdCcpO1xyXG59XHJcblxyXG5jb25zdCBjbGllbnQgPSBheGlvcy5jcmVhdGUoe1xyXG4gIGJhc2VVUkwsXHJcbiAgaGVhZGVyczogeyBcclxuICAgICd4LWFwaS1rZXknOiBhcGlLZXksXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIFxyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGVkaWNhdGVkQWRkcmVzcyh1c2VyTmFtZTogc3RyaW5nLCB1c2VyTWV0YWRhdGE/OiBhbnkpIHtcclxuICBpZiAoIW1hc3RlcldhbGxldElkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JMT0NLUkFEQVJfTUFTVEVSX1dBTExFVF9JRCBub3QgY29uZmlndXJlZC4gQ3JlYXRlIGEgbWFzdGVyIHdhbGxldCB2aWEgQmxvY2tSYWRhciBkYXNoYm9hcmQgZmlyc3QuJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgbmFtZTogdXNlck5hbWUsXHJcbiAgICBtZXRhZGF0YTogdXNlck1ldGFkYXRhIHx8IHt9LFxyXG4gICAgZGlzYWJsZUF1dG9Td2VlcDogZmFsc2UsXHJcbiAgICBlbmFibGVHYXNsZXNzV2l0aGRyYXc6IHRydWUsXHJcbiAgfTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2xpZW50LnBvc3QoYC93YWxsZXRzLyR7bWFzdGVyV2FsbGV0SWR9L2FkZHJlc3Nlc2AsIHBheWxvYWQpO1xyXG4gICAgaWYgKCFkYXRhIHx8ICFkYXRhLmRhdGEgfHwgIWRhdGEuZGF0YS5hZGRyZXNzKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBkZWRpY2F0ZWQgYWRkcmVzcyAtIGludmFsaWQgcmVzcG9uc2UnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhZGRyZXNzOiBkYXRhLmRhdGEuYWRkcmVzcyxcclxuICAgICAgYWRkcmVzc0lkOiBkYXRhLmRhdGEuaWQsXHJcbiAgICAgIGJsb2NrY2hhaW46IGRhdGEuZGF0YS5ibG9ja2NoYWluPy5uYW1lIHx8ICdldGhlcmV1bScsXHJcbiAgICAgIG5ldHdvcms6IGRhdGEuZGF0YS5uZXR3b3JrIHx8IG5ldHdvcmssXHJcbiAgICAgIGRlcml2YXRpb25QYXRoOiBkYXRhLmRhdGEuZGVyaXZhdGlvblBhdGgsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Jsb2NrUmFkYXIgY3JlYXRlRGVkaWNhdGVkQWRkcmVzcyBlcnJvcjonLCBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdlKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Z1bGwgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIEJsb2NrUmFkYXIgYWRkcmVzczogJHtlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlfWApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRDcnlwdG8ocGFyYW1zOiB7IFxyXG4gIHRvQWRkcmVzczogc3RyaW5nOyBcclxuICBhbW91bnQ6IHN0cmluZzsgXHJcbiAgYmxvY2tjaGFpbj86IHN0cmluZztcclxuICByZWZlcmVuY2U/OiBzdHJpbmc7XHJcbiAgbWV0YWRhdGE/OiBhbnk7XHJcbn0pIHtcclxuICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgYWRkcmVzczogcGFyYW1zLnRvQWRkcmVzcyxcclxuICAgIGFtb3VudDogcGFyYW1zLmFtb3VudCxcclxuICAgIGJsb2NrY2hhaW46IHBhcmFtcy5ibG9ja2NoYWluIHx8ICdiYXNlJyxcclxuICAgIHJlZmVyZW5jZTogcGFyYW1zLnJlZmVyZW5jZSB8fCBgdHgtJHtEYXRlLm5vdygpfWAsXHJcbiAgICBtZXRhZGF0YTogcGFyYW1zLm1ldGFkYXRhIHx8IHt9LFxyXG4gIH07XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNsaWVudC5wb3N0KCcvZ2F0ZXdheS93aXRoZHJhdycsIHBheWxvYWQpO1xyXG4gICAgaWYgKCFkYXRhIHx8ICFkYXRhLmRhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2VuZCBjcnlwdG8gLSBpbnZhbGlkIHJlc3BvbnNlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHhIYXNoOiBkYXRhLmRhdGEuaGFzaCB8fCBudWxsLFxyXG4gICAgICB0eElkOiBkYXRhLmRhdGEuaWQsXHJcbiAgICAgIHN0YXR1czogZGF0YS5kYXRhLnN0YXR1cyxcclxuICAgICAgYW1vdW50OiBkYXRhLmRhdGEuYW1vdW50LFxyXG4gICAgICByZWNpcGllbnRBZGRyZXNzOiBkYXRhLmRhdGEucmVjaXBpZW50QWRkcmVzcyxcclxuICAgICAgcmVmZXJlbmNlOiBkYXRhLmRhdGEucmVmZXJlbmNlLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdCbG9ja1JhZGFyIHNlbmRDcnlwdG8gZXJyb3I6JywgZXJyb3IucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzZW5kIGNyeXB0bzogJHtlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlfWApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkZHJlc3NCYWxhbmNlKGFkZHJlc3NJZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2xpZW50LmdldChgL2FkZHJlc3Nlcy8ke2FkZHJlc3NJZH0vYmFsYW5jZWApO1xyXG4gICAgcmV0dXJuIGRhdGEuZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdCbG9ja1JhZGFyIGdldEFkZHJlc3NCYWxhbmNlIGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJheGlvcyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJCTE9DS1JBREFSX0FQSV9LRVkiLCJtYXN0ZXJXYWxsZXRJZCIsIkJMT0NLUkFEQVJfTUFTVEVSX1dBTExFVF9JRCIsImJhc2VVUkwiLCJCTE9DS1JBREFSX0JBU0VfVVJMIiwibmV0d29yayIsIkJMT0NLUkFEQVJfTkVUV09SSyIsImNvbnNvbGUiLCJ3YXJuIiwiY2xpZW50IiwiY3JlYXRlIiwiaGVhZGVycyIsImNyZWF0ZURlZGljYXRlZEFkZHJlc3MiLCJ1c2VyTmFtZSIsInVzZXJNZXRhZGF0YSIsIkVycm9yIiwicGF5bG9hZCIsIm5hbWUiLCJtZXRhZGF0YSIsImRpc2FibGVBdXRvU3dlZXAiLCJlbmFibGVHYXNsZXNzV2l0aGRyYXciLCJkYXRhIiwicG9zdCIsImFkZHJlc3MiLCJhZGRyZXNzSWQiLCJpZCIsImJsb2NrY2hhaW4iLCJkZXJpdmF0aW9uUGF0aCIsImVycm9yIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwic2VuZENyeXB0byIsInBhcmFtcyIsInRvQWRkcmVzcyIsImFtb3VudCIsInJlZmVyZW5jZSIsIkRhdGUiLCJub3ciLCJ0eEhhc2giLCJoYXNoIiwidHhJZCIsInN0YXR1cyIsInJlY2lwaWVudEFkZHJlc3MiLCJnZXRBZGRyZXNzQmFsYW5jZSIsImdldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/services/blockradar.ts\n");

/***/ }),

/***/ "(api)/./lib/services/flutterwave.ts":
/*!*************************************!*\
  !*** ./lib/services/flutterwave.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDedicatedVirtualAccount: () => (/* binding */ createDedicatedVirtualAccount),\n/* harmony export */   getVirtualAccountBalance: () => (/* binding */ getVirtualAccountBalance),\n/* harmony export */   initiateFiatTransfer: () => (/* binding */ initiateFiatTransfer),\n/* harmony export */   verifyFlutterwaveSignature: () => (/* binding */ verifyFlutterwaveSignature)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst baseURL = process.env.FLUTTERWAVE_BASE_URL || \"https://api.flutterwave.com/v3\";\nconst secretKey = process.env.FLUTTERWAVE_SECRET_KEY;\nconst bvn = process.env.BVN_FOR_DVA;\nif (!secretKey) {\n    console.warn(\"FLUTTERWAVE_SECRET_KEY missing\");\n}\nconst client = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL,\n    headers: {\n        Authorization: `Bearer ${secretKey}`,\n        \"Content-Type\": \"application/json\"\n    }\n});\nasync function createDedicatedVirtualAccount(userId, email, firstName, lastName) {\n    const fullName = firstName && lastName ? `${firstName} ${lastName}` : email;\n    const accountName = `${fullName} - NIHA FLW`;\n    const payload = {\n        email,\n        is_permanent: true,\n        tx_ref: `onboard-${userId}-${Date.now()}`,\n        // Help FW associate the virtual account to the supplied user name\n        firstname: firstName || \"User\",\n        lastname: lastName || \"Account\",\n        name: accountName,\n        customer: {\n            name: accountName\n        }\n    };\n    if (bvn) payload.bvn = bvn;\n    try {\n        const { data } = await client.post(\"/virtual-account-numbers\", payload);\n        if (!data || !data.data) throw new Error(\"Failed to create virtual account\");\n        return {\n            account_number: data.data.account_number,\n            account_name: data.data.account_name || accountName,\n            bank_name: data.data.bank_name,\n            flw_ref: data.data.flw_ref\n        };\n    } catch (error) {\n        console.error(\"Flutterwave createDedicatedVirtualAccount error:\", error.response?.data || error.message);\n        throw error;\n    }\n}\nasync function initiateFiatTransfer(params) {\n    const payload = {\n        account_bank: params.bank_code,\n        account_number: params.account_number,\n        amount: params.amount,\n        narration: params.narration || \"NIHA transfer\",\n        currency: \"NGN\",\n        reference: `fiat-${Date.now()}`,\n        debit_subaccount: null\n    };\n    const { data } = await client.post(\"/transfers\", payload);\n    if (data.status !== \"success\") throw new Error(\"Fiat transfer failed\");\n    return data.data;\n}\nfunction verifyFlutterwaveSignature(headers, rawBody) {\n    const expected = process.env.FLUTTERWAVE_HASH;\n    const received = headers[\"verif-hash\"] || headers[\"Verif-Hash\"];\n    if (!expected) {\n        console.warn(\"FLUTTERWAVE_HASH not set; skipping signature verification\");\n        return true;\n    }\n    return expected === received;\n}\nasync function getVirtualAccountBalance(accountNumber) {\n    try {\n        const { data } = await client.get(`/virtual-account-numbers/${accountNumber}`);\n        if (!data || !data.data) throw new Error(\"Failed to get virtual account balance\");\n        return {\n            balance: data.data.available_balance || 0,\n            currency: data.data.currency || \"NGN\"\n        };\n    } catch (error) {\n        console.error(\"Flutterwave getVirtualAccountBalance error:\", error.response?.data || error.message);\n        return {\n            balance: 0,\n            currency: \"NGN\"\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxhQUFxQjtJQUNsRSxJQUFJO1FBQ0YsTUFBTSxFQUFFMUIsSUFBSSxFQUFFLEdBQUcsTUFBTXBCLE9BQU8rQyxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsRUFBRUQsY0FBYyxDQUFDO1FBQzdFLElBQUksQ0FBQzFCLFFBQVEsQ0FBQ0EsS0FBS0EsSUFBSSxFQUFFLE1BQU0sSUFBSUUsTUFBTTtRQUN6QyxPQUFPO1lBQ0wwQixTQUFTNUIsS0FBS0EsSUFBSSxDQUFDNkIsaUJBQWlCLElBQUk7WUFDeENiLFVBQVVoQixLQUFLQSxJQUFJLENBQUNnQixRQUFRLElBQUk7UUFDbEM7SUFDRixFQUFFLE9BQU9ULE9BQVk7UUFDbkI3QixRQUFRNkIsS0FBSyxDQUFDLCtDQUErQ0EsTUFBTUMsUUFBUSxFQUFFUixRQUFRTyxNQUFNRSxPQUFPO1FBQ2xHLE9BQU87WUFBRW1CLFNBQVM7WUFBR1osVUFBVTtRQUFNO0lBQ3ZDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaWhhLWFwaS1sYXRlc3QvLi9saWIvc2VydmljZXMvZmx1dHRlcndhdmUudHM/ZGQzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgJ2RvdGVudi9jb25maWcnO1xyXG5cclxuY29uc3QgYmFzZVVSTCA9IHByb2Nlc3MuZW52LkZMVVRURVJXQVZFX0JBU0VfVVJMIHx8ICdodHRwczovL2FwaS5mbHV0dGVyd2F2ZS5jb20vdjMnO1xyXG5jb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5GTFVUVEVSV0FWRV9TRUNSRVRfS0VZO1xyXG5jb25zdCBidm4gPSBwcm9jZXNzLmVudi5CVk5fRk9SX0RWQTtcclxuXHJcbmlmICghc2VjcmV0S2V5KSB7XHJcbiAgY29uc29sZS53YXJuKCdGTFVUVEVSV0FWRV9TRUNSRVRfS0VZIG1pc3NpbmcnKTtcclxufVxyXG5cclxuY29uc3QgY2xpZW50ID0gYXhpb3MuY3JlYXRlKHtcclxuICBiYXNlVVJMLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzZWNyZXRLZXl9YCxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZGljYXRlZFZpcnR1YWxBY2NvdW50KHVzZXJJZDogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBmaXJzdE5hbWU/OiBzdHJpbmcsIGxhc3ROYW1lPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZnVsbE5hbWUgPSBmaXJzdE5hbWUgJiYgbGFzdE5hbWUgPyBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCA6IGVtYWlsO1xyXG4gIGNvbnN0IGFjY291bnROYW1lID0gYCR7ZnVsbE5hbWV9IC0gTklIQSBGTFdgO1xyXG5cclxuICBjb25zdCBwYXlsb2FkOiBhbnkgPSB7XHJcbiAgICBlbWFpbCxcclxuICAgIGlzX3Blcm1hbmVudDogdHJ1ZSxcclxuICAgIHR4X3JlZjogYG9uYm9hcmQtJHt1c2VySWR9LSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgLy8gSGVscCBGVyBhc3NvY2lhdGUgdGhlIHZpcnR1YWwgYWNjb3VudCB0byB0aGUgc3VwcGxpZWQgdXNlciBuYW1lXHJcbiAgICBmaXJzdG5hbWU6IGZpcnN0TmFtZSB8fCAnVXNlcicsXHJcbiAgICBsYXN0bmFtZTogbGFzdE5hbWUgfHwgJ0FjY291bnQnLFxyXG4gICAgbmFtZTogYWNjb3VudE5hbWUsXHJcbiAgICBjdXN0b21lcjogeyBuYW1lOiBhY2NvdW50TmFtZSB9XHJcbiAgfTtcclxuICBpZiAoYnZuKSBwYXlsb2FkLmJ2biA9IGJ2bjtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjbGllbnQucG9zdCgnL3ZpcnR1YWwtYWNjb3VudC1udW1iZXJzJywgcGF5bG9hZCk7XHJcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEuZGF0YSkgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHZpcnR1YWwgYWNjb3VudCcpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWNjb3VudF9udW1iZXI6IGRhdGEuZGF0YS5hY2NvdW50X251bWJlcixcclxuICAgICAgYWNjb3VudF9uYW1lOiBkYXRhLmRhdGEuYWNjb3VudF9uYW1lIHx8IGFjY291bnROYW1lLFxyXG4gICAgICBiYW5rX25hbWU6IGRhdGEuZGF0YS5iYW5rX25hbWUsXHJcbiAgICAgIGZsd19yZWY6IGRhdGEuZGF0YS5mbHdfcmVmXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZsdXR0ZXJ3YXZlIGNyZWF0ZURlZGljYXRlZFZpcnR1YWxBY2NvdW50IGVycm9yOicsIGVycm9yLnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhdGVGaWF0VHJhbnNmZXIocGFyYW1zOiB7IGFtb3VudDogbnVtYmVyOyBuYXJyYXRpb24/OiBzdHJpbmc7IGFjY291bnRfbnVtYmVyOiBzdHJpbmc7IGJhbmtfY29kZTogc3RyaW5nIH0pIHtcclxuICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgYWNjb3VudF9iYW5rOiBwYXJhbXMuYmFua19jb2RlLFxyXG4gICAgYWNjb3VudF9udW1iZXI6IHBhcmFtcy5hY2NvdW50X251bWJlcixcclxuICAgIGFtb3VudDogcGFyYW1zLmFtb3VudCxcclxuICAgIG5hcnJhdGlvbjogcGFyYW1zLm5hcnJhdGlvbiB8fCAnTklIQSB0cmFuc2ZlcicsXHJcbiAgICBjdXJyZW5jeTogJ05HTicsXHJcbiAgICByZWZlcmVuY2U6IGBmaWF0LSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgZGViaXRfc3ViYWNjb3VudDogbnVsbFxyXG4gIH07XHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjbGllbnQucG9zdCgnL3RyYW5zZmVycycsIHBheWxvYWQpO1xyXG4gIGlmIChkYXRhLnN0YXR1cyAhPT0gJ3N1Y2Nlc3MnKSB0aHJvdyBuZXcgRXJyb3IoJ0ZpYXQgdHJhbnNmZXIgZmFpbGVkJyk7XHJcbiAgcmV0dXJuIGRhdGEuZGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUZsdXR0ZXJ3YXZlU2lnbmF0dXJlKGhlYWRlcnM6IGFueSwgcmF3Qm9keTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgZXhwZWN0ZWQgPSBwcm9jZXNzLmVudi5GTFVUVEVSV0FWRV9IQVNIO1xyXG4gIGNvbnN0IHJlY2VpdmVkID0gaGVhZGVyc1sndmVyaWYtaGFzaCddIHx8IGhlYWRlcnNbJ1ZlcmlmLUhhc2gnXTtcclxuICBpZiAoIWV4cGVjdGVkKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ0ZMVVRURVJXQVZFX0hBU0ggbm90IHNldDsgc2tpcHBpbmcgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbicpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIHJldHVybiBleHBlY3RlZCA9PT0gcmVjZWl2ZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWaXJ0dWFsQWNjb3VudEJhbGFuY2UoYWNjb3VudE51bWJlcjogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2xpZW50LmdldChgL3ZpcnR1YWwtYWNjb3VudC1udW1iZXJzLyR7YWNjb3VudE51bWJlcn1gKTtcclxuICAgIGlmICghZGF0YSB8fCAhZGF0YS5kYXRhKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgdmlydHVhbCBhY2NvdW50IGJhbGFuY2UnKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGJhbGFuY2U6IGRhdGEuZGF0YS5hdmFpbGFibGVfYmFsYW5jZSB8fCAwLFxyXG4gICAgICBjdXJyZW5jeTogZGF0YS5kYXRhLmN1cnJlbmN5IHx8ICdOR04nXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZsdXR0ZXJ3YXZlIGdldFZpcnR1YWxBY2NvdW50QmFsYW5jZSBlcnJvcjonLCBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiB7IGJhbGFuY2U6IDAsIGN1cnJlbmN5OiAnTkdOJyB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiYXhpb3MiLCJiYXNlVVJMIiwicHJvY2VzcyIsImVudiIsIkZMVVRURVJXQVZFX0JBU0VfVVJMIiwic2VjcmV0S2V5IiwiRkxVVFRFUldBVkVfU0VDUkVUX0tFWSIsImJ2biIsIkJWTl9GT1JfRFZBIiwiY29uc29sZSIsIndhcm4iLCJjbGllbnQiLCJjcmVhdGUiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNyZWF0ZURlZGljYXRlZFZpcnR1YWxBY2NvdW50IiwidXNlcklkIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImZ1bGxOYW1lIiwiYWNjb3VudE5hbWUiLCJwYXlsb2FkIiwiaXNfcGVybWFuZW50IiwidHhfcmVmIiwiRGF0ZSIsIm5vdyIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwibmFtZSIsImN1c3RvbWVyIiwiZGF0YSIsInBvc3QiLCJFcnJvciIsImFjY291bnRfbnVtYmVyIiwiYWNjb3VudF9uYW1lIiwiYmFua19uYW1lIiwiZmx3X3JlZiIsImVycm9yIiwicmVzcG9uc2UiLCJtZXNzYWdlIiwiaW5pdGlhdGVGaWF0VHJhbnNmZXIiLCJwYXJhbXMiLCJhY2NvdW50X2JhbmsiLCJiYW5rX2NvZGUiLCJhbW91bnQiLCJuYXJyYXRpb24iLCJjdXJyZW5jeSIsInJlZmVyZW5jZSIsImRlYml0X3N1YmFjY291bnQiLCJzdGF0dXMiLCJ2ZXJpZnlGbHV0dGVyd2F2ZVNpZ25hdHVyZSIsInJhd0JvZHkiLCJleHBlY3RlZCIsIkZMVVRURVJXQVZFX0hBU0giLCJyZWNlaXZlZCIsImdldFZpcnR1YWxBY2NvdW50QmFsYW5jZSIsImFjY291bnROdW1iZXIiLCJnZXQiLCJiYWxhbmNlIiwiYXZhaWxhYmxlX2JhbGFuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/services/flutterwave.ts\n");

/***/ }),

/***/ "(api)/./lib/services/onboarding.ts":
/*!************************************!*\
  !*** ./lib/services/onboarding.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runOnboarding: () => (/* binding */ runOnboarding)\n/* harmony export */ });\n/* harmony import */ var _blockradar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blockradar */ \"(api)/./lib/services/blockradar.ts\");\n/* harmony import */ var _flutterwave__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./flutterwave */ \"(api)/./lib/services/flutterwave.ts\");\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./supabase */ \"(api)/./lib/services/supabase.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_blockradar__WEBPACK_IMPORTED_MODULE_0__, _flutterwave__WEBPACK_IMPORTED_MODULE_1__]);\n([_blockradar__WEBPACK_IMPORTED_MODULE_0__, _flutterwave__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nasync function runOnboarding(userId, email, firstName, lastName) {\n    console.log(`Starting onboarding for user ${userId} (${email})`);\n    try {\n        console.log(\"Creating Flutterwave DVA...\");\n        const dva = await (0,_flutterwave__WEBPACK_IMPORTED_MODULE_1__.createDedicatedVirtualAccount)(userId, email, firstName, lastName);\n        console.log(`DVA created: ${dva.account_number}`);\n        console.log(\"Creating BlockRadar dedicated address...\");\n        const fullName = firstName && lastName ? `${firstName} ${lastName}` : email;\n        const cryptoAddress = await (0,_blockradar__WEBPACK_IMPORTED_MODULE_0__.createDedicatedAddress)(fullName, {\n            userId,\n            email\n        });\n        console.log(`Crypto address created: ${cryptoAddress.address}`);\n        console.log(\"Saving profile to database...\");\n        const { error: profileError } = await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"profiles\").upsert({\n            id: userId,\n            email,\n            first_name: firstName,\n            last_name: lastName,\n            dva_account_number: dva.account_number,\n            dva_bank_name: dva.bank_name,\n            dva_account_name: dva.account_name,\n            usdc_address: cryptoAddress.address,\n            erc20_address: cryptoAddress.address,\n            updated_at: new Date().toISOString()\n        });\n        if (profileError) {\n            console.error(\"Profile creation error:\", profileError);\n            throw profileError;\n        }\n        console.log(\"Initializing crypto balance...\");\n        await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"crypto_balances\").upsert([\n            {\n                user_id: userId,\n                symbol: \"USDC\",\n                amount: 0,\n                fiat_value: 0\n            }\n        ]);\n        console.log(`Onboarding completed successfully for user ${userId}`);\n        return {\n            dva,\n            cryptoAddress: {\n                address: cryptoAddress.address,\n                blockchain: cryptoAddress.blockchain,\n                network: cryptoAddress.network\n            }\n        };\n    } catch (error) {\n        console.error(\"Onboarding failed:\", error.message);\n        console.error(\"Error details:\", error.response?.data || error);\n        throw new Error(`Onboarding failed: ${error.message}`);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmljZXMvb25ib2FyZGluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNEO0FBQ1E7QUFDeEI7QUFFL0IsZUFBZUcsY0FBY0MsTUFBYyxFQUFFQyxLQUFhLEVBQUVDLFNBQWtCLEVBQUVDLFFBQWlCO0lBQ3RHQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw2QkFBNkIsRUFBRUwsT0FBTyxFQUFFLEVBQUVDLE1BQU0sQ0FBQyxDQUFDO0lBRS9ELElBQUk7UUFDRkcsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTUMsTUFBTSxNQUFNVCwyRUFBNkJBLENBQUNHLFFBQVFDLE9BQU9DLFdBQVdDO1FBQzFFQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUVDLElBQUlDLGNBQWMsQ0FBQyxDQUFDO1FBRWhESCxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNRyxXQUFXTixhQUFhQyxXQUFXLENBQUMsRUFBRUQsVUFBVSxDQUFDLEVBQUVDLFNBQVMsQ0FBQyxHQUFHRjtRQUN0RSxNQUFNUSxnQkFBZ0IsTUFBTWIsbUVBQXNCQSxDQUNoRFksVUFDQTtZQUFFUjtZQUFRQztRQUFNO1FBRWxCRyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUksY0FBY0MsT0FBTyxDQUFDLENBQUM7UUFFOUROLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU0sRUFBRU0sT0FBT0MsWUFBWSxFQUFFLEdBQUcsTUFBTWQsK0NBQVFBLENBQzNDZSxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDO1lBQ05DLElBQUlmO1lBQ0pDO1lBQ0FlLFlBQVlkO1lBQ1plLFdBQVdkO1lBQ1hlLG9CQUFvQixJQUFhWCxjQUFjO1lBQy9DWSxlQUFlLElBQWFDLFNBQVM7WUFDckNDLGtCQUFrQixJQUFhQyxZQUFZO1lBQzNDQyxjQUFjZCxjQUFjQyxPQUFPO1lBQ25DYyxlQUFlZixjQUFjQyxPQUFPO1lBQ3BDZSxZQUFZLElBQUlDLE9BQU9DLFdBQVc7UUFDcEM7UUFFRixJQUFJZixjQUFjO1lBQ2hCUixRQUFRTyxLQUFLLENBQUMsMkJBQTJCQztZQUN6QyxNQUFNQTtRQUNSO1FBRUFSLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1QLCtDQUFRQSxDQUFDZSxJQUFJLENBQUMsbUJBQW1CQyxNQUFNLENBQUM7WUFDNUM7Z0JBQUVjLFNBQVM1QjtnQkFBUTZCLFFBQVE7Z0JBQVFDLFFBQVE7Z0JBQUdDLFlBQVk7WUFBRTtTQUM3RDtRQUVEM0IsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkNBQTJDLEVBQUVMLE9BQU8sQ0FBQztRQUVsRSxPQUFPO1lBQ0xNO1lBQ0FHLGVBQWU7Z0JBQ2JDLFNBQVNELGNBQWNDLE9BQU87Z0JBQzlCc0IsWUFBWXZCLGNBQWN1QixVQUFVO2dCQUNwQ0MsU0FBU3hCLGNBQWN3QixPQUFPO1lBQ2hDO1FBQ0Y7SUFDRixFQUFFLE9BQU90QixPQUFZO1FBQ25CUCxRQUFRTyxLQUFLLENBQUMsc0JBQXNCQSxNQUFNdUIsT0FBTztRQUNqRDlCLFFBQVFPLEtBQUssQ0FBQyxrQkFBa0JBLE1BQU13QixRQUFRLEVBQUVDLFFBQVF6QjtRQUN4RCxNQUFNLElBQUkwQixNQUFNLENBQUMsbUJBQW1CLEVBQUUxQixNQUFNdUIsT0FBTyxDQUFDLENBQUM7SUFDdkQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25paGEtYXBpLWxhdGVzdC8uL2xpYi9zZXJ2aWNlcy9vbmJvYXJkaW5nLnRzP2YxY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRGVkaWNhdGVkQWRkcmVzcyB9IGZyb20gJy4vYmxvY2tyYWRhcic7XHJcbmltcG9ydCB7IGNyZWF0ZURlZGljYXRlZFZpcnR1YWxBY2NvdW50IH0gZnJvbSAnLi9mbHV0dGVyd2F2ZSc7XHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuT25ib2FyZGluZyh1c2VySWQ6IHN0cmluZywgZW1haWw6IHN0cmluZywgZmlyc3ROYW1lPzogc3RyaW5nLCBsYXN0TmFtZT86IHN0cmluZykge1xyXG4gIGNvbnNvbGUubG9nKGBTdGFydGluZyBvbmJvYXJkaW5nIGZvciB1c2VyICR7dXNlcklkfSAoJHtlbWFpbH0pYCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgRmx1dHRlcndhdmUgRFZBLi4uJyk7XHJcbiAgICBjb25zdCBkdmEgPSBhd2FpdCBjcmVhdGVEZWRpY2F0ZWRWaXJ0dWFsQWNjb3VudCh1c2VySWQsIGVtYWlsLCBmaXJzdE5hbWUsIGxhc3ROYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGBEVkEgY3JlYXRlZDogJHtkdmEuYWNjb3VudF9udW1iZXJ9YCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIEJsb2NrUmFkYXIgZGVkaWNhdGVkIGFkZHJlc3MuLi4nKTtcclxuICAgIGNvbnN0IGZ1bGxOYW1lID0gZmlyc3ROYW1lICYmIGxhc3ROYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiBlbWFpbDtcclxuICAgIGNvbnN0IGNyeXB0b0FkZHJlc3MgPSBhd2FpdCBjcmVhdGVEZWRpY2F0ZWRBZGRyZXNzKFxyXG4gICAgICBmdWxsTmFtZSxcclxuICAgICAgeyB1c2VySWQsIGVtYWlsIH1cclxuICAgICk7XHJcbiAgICBjb25zb2xlLmxvZyhgQ3J5cHRvIGFkZHJlc3MgY3JlYXRlZDogJHtjcnlwdG9BZGRyZXNzLmFkZHJlc3N9YCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1NhdmluZyBwcm9maWxlIHRvIGRhdGFiYXNlLi4uJyk7XHJcbiAgICBjb25zdCB7IGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgIC51cHNlcnQoe1xyXG4gICAgICAgIGlkOiB1c2VySWQsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgZmlyc3RfbmFtZTogZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3RfbmFtZTogbGFzdE5hbWUsXHJcbiAgICAgICAgZHZhX2FjY291bnRfbnVtYmVyOiAoZHZhIGFzIGFueSkuYWNjb3VudF9udW1iZXIsXHJcbiAgICAgICAgZHZhX2JhbmtfbmFtZTogKGR2YSBhcyBhbnkpLmJhbmtfbmFtZSxcclxuICAgICAgICBkdmFfYWNjb3VudF9uYW1lOiAoZHZhIGFzIGFueSkuYWNjb3VudF9uYW1lLFxyXG4gICAgICAgIHVzZGNfYWRkcmVzczogY3J5cHRvQWRkcmVzcy5hZGRyZXNzLFxyXG4gICAgICAgIGVyYzIwX2FkZHJlc3M6IGNyeXB0b0FkZHJlc3MuYWRkcmVzcyxcclxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHByb2ZpbGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdQcm9maWxlIGNyZWF0aW9uIGVycm9yOicsIHByb2ZpbGVFcnJvcik7XHJcbiAgICAgIHRocm93IHByb2ZpbGVFcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIGNyeXB0byBiYWxhbmNlLi4uJyk7XHJcbiAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdjcnlwdG9fYmFsYW5jZXMnKS51cHNlcnQoW1xyXG4gICAgICB7IHVzZXJfaWQ6IHVzZXJJZCwgc3ltYm9sOiAnVVNEQycsIGFtb3VudDogMCwgZmlhdF92YWx1ZTogMCB9XHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgT25ib2FyZGluZyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IGZvciB1c2VyICR7dXNlcklkfWApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGR2YSxcclxuICAgICAgY3J5cHRvQWRkcmVzczoge1xyXG4gICAgICAgIGFkZHJlc3M6IGNyeXB0b0FkZHJlc3MuYWRkcmVzcyxcclxuICAgICAgICBibG9ja2NoYWluOiBjcnlwdG9BZGRyZXNzLmJsb2NrY2hhaW4sXHJcbiAgICAgICAgbmV0d29yazogY3J5cHRvQWRkcmVzcy5uZXR3b3JrLFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ09uYm9hcmRpbmcgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBlcnJvci5yZXNwb25zZT8uZGF0YSB8fCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE9uYm9hcmRpbmcgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVEZWRpY2F0ZWRBZGRyZXNzIiwiY3JlYXRlRGVkaWNhdGVkVmlydHVhbEFjY291bnQiLCJzdXBhYmFzZSIsInJ1bk9uYm9hcmRpbmciLCJ1c2VySWQiLCJlbWFpbCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiY29uc29sZSIsImxvZyIsImR2YSIsImFjY291bnRfbnVtYmVyIiwiZnVsbE5hbWUiLCJjcnlwdG9BZGRyZXNzIiwiYWRkcmVzcyIsImVycm9yIiwicHJvZmlsZUVycm9yIiwiZnJvbSIsInVwc2VydCIsImlkIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImR2YV9hY2NvdW50X251bWJlciIsImR2YV9iYW5rX25hbWUiLCJiYW5rX25hbWUiLCJkdmFfYWNjb3VudF9uYW1lIiwiYWNjb3VudF9uYW1lIiwidXNkY19hZGRyZXNzIiwiZXJjMjBfYWRkcmVzcyIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1c2VyX2lkIiwic3ltYm9sIiwiYW1vdW50IiwiZmlhdF92YWx1ZSIsImJsb2NrY2hhaW4iLCJuZXR3b3JrIiwibWVzc2FnZSIsInJlc3BvbnNlIiwiZGF0YSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/services/onboarding.ts\n");

/***/ }),

/***/ "(api)/./lib/services/supabase.ts":
/*!**********************************!*\
  !*** ./lib/services/supabase.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCryptoBalance: () => (/* binding */ getCryptoBalance),\n/* harmony export */   getFiatBalance: () => (/* binding */ getFiatBalance),\n/* harmony export */   insertTransaction: () => (/* binding */ insertTransaction),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   upsertCryptoBalance: () => (/* binding */ upsertCryptoBalance)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst url = process.env.SUPABASE_URL;\nconst serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!url || !serviceKey) {\n    console.error(\"Missing Supabase env vars. Set SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY\");\n    throw new Error(\"Supabase env vars not set\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, serviceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nasync function insertTransaction(userId, type, amount, reference, meta) {\n    return supabase.from(\"transactions\").insert({\n        user_id: userId,\n        type,\n        amount,\n        reference,\n        meta\n    });\n}\nasync function upsertCryptoBalance(userId, symbol, amount, fiatValue) {\n    const existing = await supabase.from(\"crypto_balances\").select(\"id, amount, fiat_value\").eq(\"user_id\", userId).eq(\"symbol\", symbol).maybeSingle();\n    if (existing.data) {\n        const newAmount = Number(existing.data.amount) + amount;\n        const newFiat = Number(existing.data.fiat_value) + fiatValue;\n        return supabase.from(\"crypto_balances\").update({\n            amount: newAmount,\n            fiat_value: newFiat,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", existing.data.id);\n    } else {\n        return supabase.from(\"crypto_balances\").insert({\n            user_id: userId,\n            symbol,\n            amount,\n            fiat_value: fiatValue\n        });\n    }\n}\nasync function getFiatBalance(userId) {\n    const { data } = await supabase.from(\"transactions\").select(\"amount,type\").eq(\"user_id\", userId);\n    if (!data) return 0;\n    return data.reduce((acc, t)=>acc + (t.type === \"credit\" ? Number(t.amount) : -Number(t.amount)), 0);\n}\nasync function getCryptoBalance(userId, symbol) {\n    const { data } = await supabase.from(\"crypto_balances\").select(\"amount\").eq(\"user_id\", userId).eq(\"symbol\", symbol).maybeSingle();\n    return data ? Number(data.amount) : 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmljZXMvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQzlCO0FBRXZCLE1BQU1DLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtBQUNwQyxNQUFNQyxhQUFhSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUV4RCxJQUFJLENBQUNMLE9BQU8sQ0FBQ0ksWUFBWTtJQUN2QkUsUUFBUUMsS0FBSyxDQUFDO0lBQ2QsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRU8sTUFBTUMsV0FBV1YsbUVBQVlBLENBQUNDLEtBQUtJLFlBQVk7SUFDcERNLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUFHO0FBRUksZUFBZUMsa0JBQWtCQyxNQUFjLEVBQUVDLElBQXdCLEVBQUVDLE1BQWMsRUFBRUMsU0FBa0IsRUFBRUMsSUFBVTtJQUM5SCxPQUFPVCxTQUFTVSxJQUFJLENBQUMsZ0JBQWdCQyxNQUFNLENBQUM7UUFBRUMsU0FBU1A7UUFBUUM7UUFBTUM7UUFBUUM7UUFBV0M7SUFBSztBQUMvRjtBQUVPLGVBQWVJLG9CQUFvQlIsTUFBYyxFQUFFUyxNQUFjLEVBQUVQLE1BQWMsRUFBRVEsU0FBaUI7SUFDekcsTUFBTUMsV0FBVyxNQUFNaEIsU0FDcEJVLElBQUksQ0FBQyxtQkFDTE8sTUFBTSxDQUFDLDBCQUNQQyxFQUFFLENBQUMsV0FBV2IsUUFDZGEsRUFBRSxDQUFDLFVBQVVKLFFBQ2JLLFdBQVc7SUFFZCxJQUFJSCxTQUFTSSxJQUFJLEVBQUU7UUFDakIsTUFBTUMsWUFBWUMsT0FBT04sU0FBU0ksSUFBSSxDQUFDYixNQUFNLElBQUlBO1FBQ2pELE1BQU1nQixVQUFVRCxPQUFPTixTQUFTSSxJQUFJLENBQUNJLFVBQVUsSUFBSVQ7UUFDbkQsT0FBT2YsU0FDSlUsSUFBSSxDQUFDLG1CQUNMZSxNQUFNLENBQUM7WUFBRWxCLFFBQVFjO1lBQVdHLFlBQVlEO1lBQVNHLFlBQVksSUFBSUMsT0FBT0MsV0FBVztRQUFHLEdBQ3RGVixFQUFFLENBQUMsTUFBTUYsU0FBU0ksSUFBSSxDQUFDUyxFQUFFO0lBQzlCLE9BQU87UUFDTCxPQUFPN0IsU0FDSlUsSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUM7WUFBRUMsU0FBU1A7WUFBUVM7WUFBUVA7WUFBUWlCLFlBQVlUO1FBQVU7SUFDckU7QUFDRjtBQUVPLGVBQWVlLGVBQWV6QixNQUFjO0lBQ2pELE1BQU0sRUFBRWUsSUFBSSxFQUFFLEdBQUcsTUFBTXBCLFNBQ3BCVSxJQUFJLENBQUMsZ0JBQ0xPLE1BQU0sQ0FBQyxlQUNQQyxFQUFFLENBQUMsV0FBV2I7SUFDakIsSUFBSSxDQUFDZSxNQUFNLE9BQU87SUFDbEIsT0FBT0EsS0FBS1csTUFBTSxDQUFDLENBQUNDLEtBQWFDLElBQVdELE1BQU9DLENBQUFBLEVBQUUzQixJQUFJLEtBQUssV0FBV2dCLE9BQU9XLEVBQUUxQixNQUFNLElBQUksQ0FBQ2UsT0FBT1csRUFBRTFCLE1BQU0sSUFBSTtBQUNsSDtBQUVPLGVBQWUyQixpQkFBaUI3QixNQUFjLEVBQUVTLE1BQWM7SUFDbkUsTUFBTSxFQUFFTSxJQUFJLEVBQUUsR0FBRyxNQUFNcEIsU0FDcEJVLElBQUksQ0FBQyxtQkFDTE8sTUFBTSxDQUFDLFVBQ1BDLEVBQUUsQ0FBQyxXQUFXYixRQUNkYSxFQUFFLENBQUMsVUFBVUosUUFDYkssV0FBVztJQUNkLE9BQU9DLE9BQU9FLE9BQU9GLEtBQUtiLE1BQU0sSUFBSTtBQUN0QyIsInNvdXJjZXMiOlsid2VicGFjazovL25paGEtYXBpLWxhdGVzdC8uL2xpYi9zZXJ2aWNlcy9zdXBhYmFzZS50cz85Y2MyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCAnZG90ZW52L2NvbmZpZyc7XHJcblxyXG5jb25zdCB1cmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwhO1xyXG5jb25zdCBzZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XHJcblxyXG5pZiAoIXVybCB8fCAhc2VydmljZUtleSkge1xyXG4gIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52IHZhcnMuIFNldCBTVVBBQkFTRV9VUkwgYW5kIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVknKTtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGVudiB2YXJzIG5vdCBzZXQnKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHVybCwgc2VydmljZUtleSwge1xyXG4gIGF1dGg6IHtcclxuICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxyXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRUcmFuc2FjdGlvbih1c2VySWQ6IHN0cmluZywgdHlwZTogJ2NyZWRpdCcgfCAnZGViaXQnLCBhbW91bnQ6IG51bWJlciwgcmVmZXJlbmNlPzogc3RyaW5nLCBtZXRhPzogYW55KSB7XHJcbiAgcmV0dXJuIHN1cGFiYXNlLmZyb20oJ3RyYW5zYWN0aW9ucycpLmluc2VydCh7IHVzZXJfaWQ6IHVzZXJJZCwgdHlwZSwgYW1vdW50LCByZWZlcmVuY2UsIG1ldGEgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cHNlcnRDcnlwdG9CYWxhbmNlKHVzZXJJZDogc3RyaW5nLCBzeW1ib2w6IHN0cmluZywgYW1vdW50OiBudW1iZXIsIGZpYXRWYWx1ZTogbnVtYmVyKSB7XHJcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2NyeXB0b19iYWxhbmNlcycpXHJcbiAgICAuc2VsZWN0KCdpZCwgYW1vdW50LCBmaWF0X3ZhbHVlJylcclxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgIC5lcSgnc3ltYm9sJywgc3ltYm9sKVxyXG4gICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gIGlmIChleGlzdGluZy5kYXRhKSB7XHJcbiAgICBjb25zdCBuZXdBbW91bnQgPSBOdW1iZXIoZXhpc3RpbmcuZGF0YS5hbW91bnQpICsgYW1vdW50O1xyXG4gICAgY29uc3QgbmV3RmlhdCA9IE51bWJlcihleGlzdGluZy5kYXRhLmZpYXRfdmFsdWUpICsgZmlhdFZhbHVlO1xyXG4gICAgcmV0dXJuIHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjcnlwdG9fYmFsYW5jZXMnKVxyXG4gICAgICAudXBkYXRlKHsgYW1vdW50OiBuZXdBbW91bnQsIGZpYXRfdmFsdWU6IG5ld0ZpYXQsIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxyXG4gICAgICAuZXEoJ2lkJywgZXhpc3RpbmcuZGF0YS5pZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY3J5cHRvX2JhbGFuY2VzJylcclxuICAgICAgLmluc2VydCh7IHVzZXJfaWQ6IHVzZXJJZCwgc3ltYm9sLCBhbW91bnQsIGZpYXRfdmFsdWU6IGZpYXRWYWx1ZSB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWF0QmFsYW5jZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3RyYW5zYWN0aW9ucycpXHJcbiAgICAuc2VsZWN0KCdhbW91bnQsdHlwZScpXHJcbiAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xyXG4gIGlmICghZGF0YSkgcmV0dXJuIDA7XHJcbiAgcmV0dXJuIGRhdGEucmVkdWNlKChhY2M6IG51bWJlciwgdDogYW55KSA9PiBhY2MgKyAodC50eXBlID09PSAnY3JlZGl0JyA/IE51bWJlcih0LmFtb3VudCkgOiAtTnVtYmVyKHQuYW1vdW50KSksIDApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3J5cHRvQmFsYW5jZSh1c2VySWQ6IHN0cmluZywgc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdjcnlwdG9fYmFsYW5jZXMnKVxyXG4gICAgLnNlbGVjdCgnYW1vdW50JylcclxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgIC5lcSgnc3ltYm9sJywgc3ltYm9sKVxyXG4gICAgLm1heWJlU2luZ2xlKCk7XHJcbiAgcmV0dXJuIGRhdGEgPyBOdW1iZXIoZGF0YS5hbW91bnQpIDogMDtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwidXJsIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsInNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJzdXBhYmFzZSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJpbnNlcnRUcmFuc2FjdGlvbiIsInVzZXJJZCIsInR5cGUiLCJhbW91bnQiLCJyZWZlcmVuY2UiLCJtZXRhIiwiZnJvbSIsImluc2VydCIsInVzZXJfaWQiLCJ1cHNlcnRDcnlwdG9CYWxhbmNlIiwic3ltYm9sIiwiZmlhdFZhbHVlIiwiZXhpc3RpbmciLCJzZWxlY3QiLCJlcSIsIm1heWJlU2luZ2xlIiwiZGF0YSIsIm5ld0Ftb3VudCIsIk51bWJlciIsIm5ld0ZpYXQiLCJmaWF0X3ZhbHVlIiwidXBkYXRlIiwidXBkYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlkIiwiZ2V0RmlhdEJhbGFuY2UiLCJyZWR1Y2UiLCJhY2MiLCJ0IiwiZ2V0Q3J5cHRvQmFsYW5jZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/services/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/onboarding/index.ts":
/*!***************************************!*\
  !*** ./pages/api/onboarding/index.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_services_onboarding__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/services/onboarding */ \"(api)/./lib/services/onboarding.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_services_onboarding__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_services_onboarding__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n    const { userId, email, firstName, lastName } = req.body || {};\n    if (!userId || !email) return res.status(400).json({\n        error: \"userId and email required\"\n    });\n    try {\n        const result = await (0,_lib_services_onboarding__WEBPACK_IMPORTED_MODULE_0__.runOnboarding)(userId, email, firstName, lastName);\n        res.status(200).json({\n            success: true,\n            data: result\n        });\n    } catch (e) {\n        console.error(\"Onboarding API error:\", e);\n        res.status(500).json({\n            success: false,\n            error: e.message || String(e)\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvb25ib2FyZGluZy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNpRTtBQUVsRCxlQUFlQyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUSxPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBcUI7SUFFckYsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUUsR0FBR1QsSUFBSVUsSUFBSSxJQUFJLENBQUM7SUFDNUQsSUFBSSxDQUFDSixVQUFVLENBQUNDLE9BQU8sT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQTRCO0lBRXhGLElBQUk7UUFDRixNQUFNTSxTQUFTLE1BQU1iLHVFQUFhQSxDQUFDUSxRQUFRQyxPQUFPQyxXQUFXQztRQUM3RFIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFUSxTQUFTO1lBQU1DLE1BQU1GO1FBQU87SUFDckQsRUFBRSxPQUFPRyxHQUFRO1FBQ2ZDLFFBQVFWLEtBQUssQ0FBQyx5QkFBeUJTO1FBQ3ZDYixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVRLFNBQVM7WUFBT1AsT0FBT1MsRUFBRUUsT0FBTyxJQUFJQyxPQUFPSDtRQUFHO0lBQ3ZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uaWhhLWFwaS1sYXRlc3QvLi9wYWdlcy9hcGkvb25ib2FyZGluZy9pbmRleC50cz84YjQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgeyBydW5PbmJvYXJkaW5nIH0gZnJvbSAnLi4vLi4vLi4vbGliL3NlcnZpY2VzL29uYm9hcmRpbmcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuXHJcbiAgY29uc3QgeyB1c2VySWQsIGVtYWlsLCBmaXJzdE5hbWUsIGxhc3ROYW1lIH0gPSByZXEuYm9keSB8fCB7fTtcclxuICBpZiAoIXVzZXJJZCB8fCAhZW1haWwpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAndXNlcklkIGFuZCBlbWFpbCByZXF1aXJlZCcgfSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5PbmJvYXJkaW5nKHVzZXJJZCwgZW1haWwsIGZpcnN0TmFtZSwgbGFzdE5hbWUpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQgfSk7XHJcbiAgfSBjYXRjaCAoZTogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdPbmJvYXJkaW5nIEFQSSBlcnJvcjonLCBlKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlLm1lc3NhZ2UgfHwgU3RyaW5nKGUpIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicnVuT25ib2FyZGluZyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ1c2VySWQiLCJlbWFpbCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYm9keSIsInJlc3VsdCIsInN1Y2Nlc3MiLCJkYXRhIiwiZSIsImNvbnNvbGUiLCJtZXNzYWdlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/onboarding/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fonboarding&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Conboarding%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();